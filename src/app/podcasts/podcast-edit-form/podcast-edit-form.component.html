<div *ngIf="(podcast$ | async); let podcast; else: loading">
    <div *ngIf="!useWizard">
        <form class="needs-validation"
            [formGroup]="podcastForm"
            (submit)="submitForm()"
            novalidate>
            <div class="block">
                <ul class="nav nav-tabs nav-tabs-alt"
                    data-toggle="tabs"
                    role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active"
                            data-toggle="tab"
                            href="#btabs-podcast-details"><i class="fa fa-info text-primary"
                                aria-hidden="true"></i> Details </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"
                            data-toggle="tab"
                            href="#btabs-podcast-privacy"><i class="fa fa-user-secret text-primary"
                                aria-hidden="true"></i> Privacy</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"
                            data-toggle="tab"
                            href="#btabs-podcast-notifications"><i class="fa fa-bell text-primary"
                                aria-hidden="true"></i> Alerts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"
                            data-toggle="tab"
                            href="#btabs-podcast-advanced"><i class="fa fa-glasses text-primary"
                                aria-hidden="true"></i> Nerds
                        </a>
                    </li>
                    <li class="nav-item ml-auto">
                        <div class="block-options mr-15 mt-5">
                            <button type="button"
                                class="btn btn-alt-danger"
                                data-toggle="block-option"
                                (click)="showPodcastDeleteDialog(podcast)">
                                <span class="d-none d-md-inline-block">Delete</span>&nbsp;<i class="fa fa-times"></i>
                            </button>
                            <button type="submit"
                                class="btn"
                                data-toggle="block-option"
                                [disabled]="sending || !podcastForm.valid">
                                <span class="d-none d-md-inline-block">Save</span>&nbsp; <i class="fa fa-save"></i>
                            </button>
                        </div>
                    </li>
                </ul>
                <div class="block-content tab-content">
                    <div class="tab-pane active"
                        id="btabs-podcast-details"
                        role="tabpanel">
                        <div class="row">
                            <div class="col-md-6 pr-50">
                                <div class="form-group">
                                    <label for="title">Title</label>
                                    <input type="text"
                                        class="form-control"
                                        id="title"
                                        name="title"
                                        [ngClass]="{
                                            'is-invalid': !podcastForm.valid && podcastForm.controls.title.invalid
                                        }"
                                        placeholder="Podcast title"
                                        formControlName="title"
                                        required />
                                    <div class="invalid-feedback">Title is required</div>
                                </div>
                                <div class="p-20">
                                    <div class="form-group">
                                        <div class="col-md-3"
                                            d><label for="category">Category</label></div>
                                        <div class="col-md-9">
                                            <ng-select formControlName="category"
                                                [items]="categories$ | async"
                                                bindLabel="description"
                                                placeholder="Select category">
                                            </ng-select>
                                            <!-- <app-category-selector
                                                               [hasError]="categoryError"
                                                               [(category)]="category"
                                                               [(subcategories)]="subcategories"></app-category-selector> -->
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="description">Description</label>
                                    <quill-editor id="description"
                                        name="description"
                                        [style]="{ height: '400px' }"
                                        formControlName="description">
                                    </quill-editor>
                                </div>
                            </div>
                            <div class="col-md-6 pl-50">
                                <div class="row">
                                    <div class="form-body">
                                        <div class="form-group">
                                            <label for="">Cover Image </label>
                                            <app-image-upload [imageUrl]="podcast.imageUrl"
                                                #imageControl></app-image-upload>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane mb-50"
                        id="btabs-podcast-privacy"
                        role="tabpanel">
                        <app-podcast-privacy [podcast]="podcast"></app-podcast-privacy>
                    </div>
                    <div class="tab-pane mb-50"
                        id="btabs-podcast-notifications"
                        role="tabpanel">
                        <app-notifications [podcast]="podcast"
                            (updated)="podcastUpdated(podcast)"></app-notifications>
                    </div>
                    <div class="tab-pane mb-50"
                        id="btabs-podcast-advanced"
                        role="tabpanel">
                        <div class="col-md-6"
                            *ngIf="podcast.id">
                            <label for="podcast-slug">Slug</label>
                            <div class="input-group">
                                <input type="text"
                                    class="form-control"
                                    id="podcast-slug"
                                    placeholder="Podcast slug"
                                    [ngClass]="{
                                        'is-invalid': !podcastForm.valid && podcastForm.controls.slug.invalid
                                    }"
                                    formControlName="slug"
                                    autocomplete="off"
                                    required />
                                <div class="input-group-prepend"
                                    *ngIf="false">
                                    <div class="input-group-text">@</div>
                                </div>
                            </div>
                            <div class="invalid-feedback d-block"
                                *ngIf="podcastForm.invalid && podcastForm.controls.slug.invalid">
                                {{ podcastForm.controls.slug.errors.message }}
                            </div>
                            <div class="form-text text-muted">This will be the unique URL for your podcast</div>
                        </div>
                        <div class="row  mb-3">
                            <div class="col-md-8">
                                <label for="podcast-domain">Custom Domain </label>
                                <div class="input-group">
                                    <input type="text"
                                        class="form-control"
                                        id="podcast-domain"
                                        placeholder="Custom domain name"
                                        [ngClass]="{
                                            'is-invalid':
                                                !podcastForm.valid && podcastForm.controls.customDomain.invalid
                                        }"
                                        formControlName="customDomain"
                                        autocomplete="off" />
                                    <div class="input-group-append">
                                        <span class="input-group-text"> <i class="fa fa-asterisk"></i> </span>
                                    </div>
                                </div>
                                <div class="invalid-feedback d-block"
                                    *ngIf="podcastForm.controls.customDomain.invalid">
                                    {{ podcastForm.controls.customDomain.errors.message }}
                                </div>
                                <div class="form-text text-muted">
                                    You need to setup up a CNAME pointing to rss.podnoms.com
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div *ngIf="useWizard"
        class="mx-50">
        <app-podcast-add-wizard [podcast]="podcast"
            (finish)="wizardFinish(podcast)"
            #wizardControl>
        </app-podcast-add-wizard>
    </div>
</div>
<ng-template #loading>
    <app-loader [loadingText]="'Loading....'">
    </app-loader>
</ng-template>
