<div *ngIf="!firstRun">
    <div class="block"
         *ngIf="podcast$ | async; let podcast; else loading">
        <div class="block-header block-header-default">
            <h1 class="block-title">Podcast Details</h1>
            <div class="block-options">
                <button (click)="submitForm(podcast)"
                        class="btn btn-alt-primary btn-block-option"
                        [disabled]="sending">
                    <i class="fa fa-check mr-5"></i> Add Podcast
                </button>
                <div class="dropdown">
                    <button type="button"
                            class="btn-block-option"
                            data-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false">
                        <i class="fa fa-fw fa-ellipsis-v"></i>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right"
                         x-placement="bottom-end"
                         style="position: absolute; transform: translate3d(28px, 28px, 0px); top: 0px; left: 0px; will-change: transform;">
                        <a class="dropdown-item"
                           href="javascript:void(0)">
                            <i class="fa fa-fw fa-pencil mr-5"></i>Edit
                        </a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item"
                           href="javascript:void(0)"
                           data-toggle="block-option"
                           (click)="podcastDeleteDialog.show()"
                           data-action="close">
                            <i class="fa fa-fw fa-times text-danger mr-5"></i>Delete
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="block-content">
            <div class="row my-20">
                <div class="col-6 form-left">
                    <form #form="ngForm">
                        <div class="form-body">
                            <div class="form-group row">
                                <label for="podcast-name">Podcast Name</label>
                                <input id="podcast-name"
                                       name="podcast-name"
                                       class="form-control"
                                       placeholder="Podcast name"
                                       #podcastName
                                       [(ngModel)]="podcast.title">
                            </div>
                            <div class="form-group row"
                                 *ngIf="podcast.id">
                                <div class="col-6">
                                    <label for="slug-box">Slug</label>
                                    <div class="input-group"
                                         [ngClass]="domain.hasError('pattern') ? 'is-invalid' : ''">
                                        <input type="text"
                                               class="form-control"
                                               id="slug-box"
                                               name="slug-box"
                                               #domain="ngModel"
                                               pattern="^([a-z0-9])(([a-z0-9-]{1,61})?[a-z0-9]{1})?(\.[a-z0-9](([a-z0-9-]{1,61})?[a-z0-9]{1})?)?(\.[a-zA-Z]{2,4})+$"

                                               autocomplete="off"
                                               required=""
                                               (blur)="checkDomain(podcast.customDomain)"
                                               [(ngModel)]="podcast.customDomain">
                                        <div class="input-group-append">
                                            <span class="input-group-text">
                                                <i class="fa fa-asterisk"
                                                   [ngClass]="checkingDomain ? 'fa-spin' : ''"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="invalid-feedback"
                                         *ngIf="domain.hasError('pattern')">This does not look like a valid domain?</div>
                                    <div class="form-text text-muted">You need to setup up a CNAME pointing to rss.podnoms.com</div>
                                </div>
                            </div>
                            <!-- <div class="form-group row">
                            <div class="col-xs-8">
                                <div class="input-group">
                                    <label for="custom-domain">Custom Domain</label>
                                    <input id="custom-domain"
                                           name="custom-domain"
                                           class="form-control"
                                           placeholder="Custom domain"
                                           pattern="^([a-z0-9])(([a-z0-9-]{1,61})?[a-z0-9]{1})?(\.[a-z0-9](([a-z0-9-]{1,61})?[a-z0-9]{1})?)?(\.[a-zA-Z]{2,4})+$"

                                           #domain="ngModel"
                                           (blur)="checkDomain()"
                                           [(ngModel)]="podcast.customDomain">

                                </div>
                                <div class="invalid-feedback"
                                     [hidden]="!domain.hasError('pattern')">
                                    This does not look like a valid domain?</div>
                            </div>
                        </div> -->
                            <div class="form-group row">
                                <label for="podcast-description">Description</label>
                                <quill-editor name="description"
                                              [style]="{height: '400px'}"
                                              [(ngModel)]="podcast.description"></quill-editor>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit"
                                    [disabled]="sending"
                                    class="btn btn-success">
                                <i class="fa fa-check"></i> Done!</button>
                        </div>
                    </form>
                </div>
                <div class="col-6 form-right"
                     *ngIf="podcast.id">
                    <div class="form-body">

                        <div class="form-group">
                            <label for="">Cover Image</label>
                            <div class="file-upload">
                                <div class="options-container"
                                     id="image-container">
                                    <img class="img-fluid options-item img-preview"
                                         [src]="image.src"
                                         alt="">
                                    <div class="options-overlay bg-black-op-75">
                                        <div class="options-overlay-content">
                                            <a class="btn btn-sm btn-rounded btn-alt-primary min-width-75"
                                               (click)="callFileInput()">
                                                <i class="fa fa-pencil"></i> Replace
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="input-group"
                                     style="visibility: hidden;">
                                    <span class="input-group-btn">
                                        <span class="btn btn-default btn-file">
                                            Choose image....
                                            <input type="file"
                                                   (change)="fileChangeEvent()"
                                                   #fileInput>
                                        </span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade"
             bsModal
             #podcastDeleteDialog="bs-modal"
             tabindex="-1"
             role="dialog"
             aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title pull-left">Delete this podcast?</h4>
                        <button type="button"
                                class="close pull-right"
                                aria-label="Close"
                                (click)="podcastDeleteDialog.hide()">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <button type="button"
                                class="btn btn-primary pull-right"
                                (click)="podcastDeleteDialog.hide()">No
                        </button>
                        <button type="button"
                                class="btn btn-danger pull-right"
                                (click)="deletePodcast(podcast); podcastDeleteDialog.hide()">Yes
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <ng-template #loading>
        <div class="sk-wave"
             *ngIf="!selectedPodcast">
            <div class="sk-rect sk-rect1"></div>
            <div class="sk-rect sk-rect2"></div>
            <div class="sk-rect sk-rect3"></div>
            <div class="sk-rect sk-rect4"></div>
            <div class="sk-rect sk-rect5"></div>
        </div>
    </ng-template>
</div>
<div *ngIf="firstRun" class="mx-50">
    <div class="js-wizard-simple block">
        <ul class="nav nav-tabs nav-tabs-block nav-fill"
            role="tablist">
            <li class="nav-item">
                <a class="nav-link active"
                   href="#wizard-progress-step1"
                   data-toggle="tab">1. Personal</a>
            </li>
            <li class="nav-item">
                <a class="nav-link"
                   href="#wizard-progress-step2"
                   data-toggle="tab">2. Details</a>
            </li>
            <li class="nav-item">
                <a class="nav-link"
                   href="#wizard-progress-step3"
                   data-toggle="tab">3. Extra</a>
            </li>
        </ul>
        <form action="be_forms_wizard.php"
              method="post">
            <div class="block-content block-content-sm">
                <div class="progress"
                     data-wizard="progress"
                     style="height: 8px;">
                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary"
                         role="progressbar"
                         style="width: 34.3333%;"
                         aria-valuenow="30"
                         aria-valuemin="0"
                         aria-valuemax="100"></div>
                </div>
            </div>
            <div class="block-content block-content-full tab-content"
                 style="min-height: 265px;">
                <div class="tab-pane active"
                     id="wizard-progress-step1"
                     role="tabpanel">
                    <div class="form-group">
                        <label for="wizard-progress-firstname">First Name</label>
                        <input class="form-control"
                               type="text"
                               id="wizard-progress-firstname"
                               name="wizard-progress-firstname">
                    </div>
                    <div class="form-group">
                        <label for="wizard-progress-lastname">Last Name</label>
                        <input class="form-control"
                               type="text"
                               id="wizard-progress-lastname"
                               name="wizard-progress-lastname">
                    </div>
                    <div class="form-group">
                        <label for="wizard-progress-email">Email</label>
                        <input class="form-control"
                               type="email"
                               id="wizard-progress-email"
                               name="wizard-progress-email">
                    </div>
                </div>
                <div class="tab-pane"
                     id="wizard-progress-step2"
                     role="tabpanel">
                    <div class="form-group">
                        <label for="wizard-progress-bio">Bio</label>
                        <textarea class="form-control"
                                  id="wizard-progress-bio"
                                  name="wizard-progress-bio"
                                  rows="9"></textarea>
                    </div>
                </div>
                <div class="tab-pane"
                     id="wizard-progress-step3"
                     role="tabpanel">
                    <div class="form-group">
                        <label for="wizard-progress-location">Location</label>
                        <input class="form-control"
                               type="text"
                               id="wizard-progress-location"
                               name="wizard-progress-location">
                    </div>
                    <div class="form-group">
                        <label for="wizard-progress-skills">Skills</label>
                        <select class="form-control"
                                id="wizard-progress-skills"
                                name="wizard-progress-skills"
                                size="1">
                            <option value="">Please select your best skill</option>
                            <option value="1">Photoshop</option>
                            <option value="2">HTML</option>
                            <option value="3">CSS</option>
                            <option value="4">JavaScript</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="css-control css-control-primary css-switch"
                               for="wizard-progress-terms">
                            <input type="checkbox"
                                   class="css-control-input"
                                   id="wizard-progress-terms"
                                   name="wizard-progress-terms">
                            <span class="css-control-indicator"></span> Agree with the terms
                        </label>
                    </div>
                </div>
            </div>
            <div class="block-content block-content-sm block-content-full bg-body-light">
                <div class="row">
                    <div class="col-6">
                        <button type="button"
                                class="btn btn-alt-secondary disabled"
                                data-wizard="prev">
                            <i class="fa fa-angle-left mr-5"></i> Previous
                        </button>
                    </div>
                    <div class="col-6 text-right">
                        <button type="button"
                                class="btn btn-alt-secondary"
                                data-wizard="next">
                            Next
                            <i class="fa fa-angle-right ml-5"></i>
                        </button>
                        <button type="submit"
                                class="btn btn-alt-primary d-none"
                                data-wizard="finish">
                            <i class="fa fa-check mr-5"></i> Submit
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
