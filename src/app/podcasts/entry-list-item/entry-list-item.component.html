<div class="d-flex flex-row bd-highlight mb-3 ">
    <div class="avatar"
        id="col-left">
        <img [src]="entry.thumbnailUrl"
            class="img-avatar img-avatar48"
            [alt]="">
        <span class="avatar-status badge-success"></span>
    </div>

    <div id="col-middle"
        class="flex-grow-1 p-2">
        <div class="font-w600">
            <span>{{entry.title}}</span>
        </div>
        <div class="font-w600 mb-0">
            <div *ngIf="entry.processingStatus==='Failed'"
                class="text-danger">
                <span>Failed!</span>
            </div>
            <div *ngIf="entry.processingStatus==='Processed'"
                class="text-muted">
                {{entry.createDate | amFromUtc | amLocal | amTimeAgo}}
            </div>
            <div *ngIf="entry.processingStatus!=='Processed'">
                <span *ngIf="entry.processingStatus!=='Processed' &&
                             entry.processingStatus !== 'Failed'"
                    style="width: 100%">
                    <div *ngIf="entry.processingStatus==='Accepted' ||
                                entry.processingStatus==='Processing' ||
                                entry.processingStatus==='Parsing' ||
                                entry.processingStatus==='Converting'">
                        <div class="spinner-border spinner-border-sm text-primary"
                            role="status">
                        </div>
                        <span class="ml-5">{{entry.processingStatus || 'Preparing'}}...... {{narrative}}</span>
                    </div>

                    <p *ngIf="entry.processingStatus==='Downloading' ||
                              entry.processingStatus==='Uploading' ||
                              entry.processingStatus==='Caching'">
                        <ngb-progressbar type="warning"
                            [value]="percentageProcessed">
                            {{entry.processingStatus}}:{{currentSpeed}} - {{percentageProcessed}}%
                        </ngb-progressbar>
                    </p>
                </span>
                <span *ngIf="entry.processingStatus==='Processed'"
                    style="width: 100%"
                    class="mt-25">
                </span>
            </div>
        </div>
    </div>

    <div id="col-right">
        <div class="btn-group me-1">
            <button type="button"
                class="btn btn-sm btn-secondary js-bs-tooltip-enabled"
                *ngIf="entry.processingStatus==='Processed'"
                (click)="playAudio()"
                aria-label="Play">
                <div [ngSwitch]="(playState$ | async)">
                    <i *ngSwitchCase="playStates.loading"
                        class="fa fa-cog fa-spin">
                    </i>
                    <i *ngSwitchCase="playStates.playing"
                        class="fa-solid fa-pause">
                    </i>
                    <i *ngSwitchDefault
                        class="fa-solid fa-play">
                    </i>
                </div>
            </button>

            <button type="button"
                *ngIf="entry.processingStatus==='Processed'"
                class="btn btn-sm btn-secondary js-bs-tooltip-enabled"
                data-toggle="tooltip"
                title="Show episode logs"
                (click)="showLogs(entry)">
                <i class="fa fa-terminal"></i>
            </button>
        </div>
        <div class="btn-group me-1">

            <button type="button"
                *ngIf="entry.processingStatus==='Processed'"
                class="btn btn-sm btn-info js-bs-tooltip-enabled"
                data-toggle="tooltip"
                title="Share episode"
                (click)="shareEpisode(entry)">
                <i class="fa fa-share-alt"></i>
            </button>
            <button type="button"
                *ngIf="entry.processingStatus==='Processed'"
                class="btn btn-sm  btn-info"
                (click)="downloadAudio(entry)"
                data-toggle="tooltip"
                title="Download episode">
                <i *ngIf="!preparingDownload"
                    class="fa-solid fa-cloud-download-alt"></i>
                <i *ngIf="preparingDownload"
                    class="fa fa-cog fa-spin text-success"></i>
            </button>

            <a class="btn btn-sm btn-info"
                *ngIf="entry.processingStatus==='Processed'"
                [routerLink]="['../entry', entry?.id, 'edit']"
                data-toggle="tooltip"
                title="Edit episode">
                <i class="fa-solid fa-pencil-alt"></i>
            </a>
        </div>
        <div class="btn-group me-1">

            <button type="button"
                *ngIf="entry.processingStatus === 'Failed'"
                class="btn btn-sm btn-warning"
                (click)="retry(entry)"
                data-toggle="tooltip"
                title="Retry"><i class="fas fa fa-redo"></i>&nbsp;Retry
            </button>
            <button type="button"
                class="btn btn-sm btn-danger"
                (click)="showEntryDeleteDialog()"
                data-toggle="tooltip"
                title="Delete episode">
                <i class="fa fa-times"></i>
            </button>
        </div>
    </div>
</div>

<!-- <td class="text-center"
    scope="row"> <img [src]="entry.thumbnailUrl"
        class="img-avatar img-avatar48"></td>
<td>
    <a class="fw-semibold"
        data-bs-toggle="modal"
        data-bs-target="#modal-message"
        href="#">{{entry.title}}
    </a>
    <div class="text-muted mt-1">{{entry.createDate | amFromUtc | amLocal | amTimeAgo}}..</div>
</td>

<td class="text-center">
    <div class="btn-group">

        <button type="button"
            class="btn btn-sm btn-secondary js-bs-tooltip-enabled"
            *ngIf="entry.processingStatus==='Processed'"
            (click)="playAudio()"
            aria-label="Play">
            <div [ngSwitch]="(playState$ | async)">
                <i *ngSwitchCase="playStates.loading"
                    class="fa fa-cog fa-spin">
                </i>
                <i *ngSwitchCase="playStates.playing"
                    class="fa-solid fa-pause">
                </i>
                <i *ngSwitchDefault
                    class="fa-solid fa-play">
                </i>
            </div>
        </button>

        <button type="button"
            *ngIf="entry.processingStatus==='Processed'"
            class="btn btn-sm btn-secondary js-bs-tooltip-enabled"
            data-toggle="tooltip"
            title="Show episode logs"
            (click)="showLogs(entry)">
            <i class="fa fa-terminal"></i>
        </button>
        <button type="button"
            *ngIf="entry.processingStatus==='Processed'"
            class="btn btn-info"
            data-toggle="tooltip"
            title="Share episode"
            (click)="shareEpisode(entry)">
            <i class="fa fa-share-alt"></i>
        </button>
        <button type="button"
            *ngIf="entry.processingStatus==='Processed'"
            class="btn btn-info"
            (click)="downloadAudio(entry)"
            data-toggle="tooltip"
            title="Download episode">
            <i *ngIf="!preparingDownload"
                class="fa-solid fa-cloud-download-alt"></i>
            <i *ngIf="preparingDownload"
                class="fa fa-cog fa-spin text-success"></i>
        </button>

        <a class="btn btn-info"
            *ngIf="entry.processingStatus==='Processed'"
            [routerLink]="['../entry', entry?.id, 'edit']"
            data-toggle="tooltip"
            title="Edit episode">
            <i class="fa-solid fa-pencil-alt"></i>
        </a>
        <button type="button"
            *ngIf="entry.processingStatus === 'Failed'"
            class="btn btn-warning"
            (click)="retry(entry)"
            data-toggle="tooltip"
            title="Retry"><i class="fas fa fa-redo"></i>&nbsp;Retry
        </button>
        <button type="button"
            class="btn btn-danger"
            (click)="showEntryDeleteDialog()"
            data-toggle="tooltip"
            title="Delete episode">
            <i class="fa fa-times"></i>
        </button>
    </div>
</td> -->
